<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Auction Picks | Vinvel</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Jost:wght@500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        /* --- CORE STYLES --- */
        :root {
            --primary-gradient: linear-gradient(135deg, #7c3aed 0%, #06b6d4 100%);
            --text-dark: #e5e7eb;
            --text-grey: #9ca3af;
            --bg-light: #020617;
            --surface-elevated: #020617;
            --surface-card: #020617;
            --surface-soft: #020617;
            --white: #020617;
            --card-shadow: 0 18px 40px rgba(15,23,42,0.85);
            --radius-md: 12px;
            --radius-lg: 16px;
        }
        * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Inter', sans-serif; }
        body { background: radial-gradient(circle at top left, #020617 0, #020617 45%, #020617 100%); color: var(--text-grey); display: flex; flex-direction: column; min-height: 100vh; }
        a { text-decoration: none; color: inherit; }
        h1, h2, h3, h4 { font-family: 'Jost', sans-serif; color: var(--text-dark); }
        .container { max-width: 1400px; margin: 0 auto; padding: 0 20px; background: radial-gradient(circle at top, #020617 0, #020617 40%, #020617 100%); }
        .page-shell { background: radial-gradient(circle at top left, #020617 0, #020617 40%, #020617 100%); }

        /* HEADER */
        header { background: rgba(2,6,23,0.96); padding: 12px 0; border-bottom: 1px solid rgba(148,163,184,0.28); position: sticky; top: 0; z-index: 100; backdrop-filter: blur(14px); }
        .nav-inner { display: flex; justify-content: space-between; align-items: center; gap: 16px; }
        .logo { display:flex; align-items:center; gap:10px; }
        .logo img { height:64px; width:auto; display:block; }

        @media (max-width: 640px) {
            .logo img { height:56px; }
        }
        
        /* LAYOUT GRID */
        .inventory-wrapper { display: grid; grid-template-columns: 260px 1fr; gap: 30px; padding: 30px 0 40px; flex: 1; align-items: start; }
        
        /* SIDEBAR FILTERS */
        .sidebar { background: radial-gradient(circle at top left, #020617 0, #020617 55%, #020617 100%); padding: 25px; border-radius: var(--radius-md); box-shadow: var(--card-shadow); position: sticky; top: 90px; border:1px solid rgba(148,163,184,0.55); }
        .sidebar-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; }
        .filter-group { margin-bottom: 20px; }
        .filter-group label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 0.9rem; color: #e5e7eb; }
        .filter-group select, .filter-group input { width: 100%; padding: 10px; border: 1px solid rgba(55,65,81,0.8); border-radius: 8px; font-size: 0.9rem; outline: none; background:#020617; color:#e5e7eb; }
        .filter-group select:focus, .filter-group input:focus { border-color:#6366f1; box-shadow:0 0 0 1px rgba(129,140,248,0.7); }
        .filter-btn { width: 100%; background: var(--primary-gradient); color: white; padding: 12px; border: none; border-radius: 999px; cursor: pointer; margin-top: 10px; font-family: 'Jost', sans-serif; font-weight: 600; font-size: 0.9rem; letter-spacing: 0.02em; transition: 0.25s ease; box-shadow: 0 4px 14px rgba(76,81,191,0.7); }
        .filter-btn:hover { transform: translateY(-1px); box-shadow: 0 8px 22px rgba(76,81,191,0.95); }
        .reset-btn { width: 100%; background: transparent; color: #9ca3af; padding: 8px; border: none; cursor: pointer; margin-top: 5px; font-size: 0.85rem; text-decoration: underline; }

        /* MAIN LIST AREA & VIEW CONTROLS */
        .car-list { min-width: 0; }
        
        .list-controls { display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; flex-wrap: wrap; gap: 15px; }
        .view-toggles { display: flex; gap: 10px; align-items: center; }
        .view-btn { background: white; border: 1px solid #ddd; width: 35px; height: 35px; display: flex; align-items: center; justify-content: center; border-radius: 6px; cursor: pointer; color: #666; transition: 0.2s; }
        .view-btn.active { background: #6600FF; color: white; border-color: #6600FF; }

        /* PAGINATION */
        .pagination-bar { display: flex; justify-content: space-between; align-items: center; margin-top: 24px; gap: 16px; flex-wrap: wrap; font-size: 0.9rem; color: #9ca3af; }
        .page-controls { display: flex; gap: 8px; align-items: center; }
        .page-btn { padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(55,65,81,0.9); background: #020617; cursor: pointer; font-size: 0.85rem; min-width: 34px; text-align: center; transition: 0.2s; color:#e5e7eb; }
        .page-btn:hover { background: #111827; border-color: #6366f1; }
        .page-btn.active { background: #6366f1; color: #fff; border-color: #6366f1; }
        .page-btn[disabled] { opacity: 0.4; cursor: default; background: #020617; }
        .page-size-select { padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(55,65,81,0.9); font-size: 0.85rem; background:#020617; color:#e5e7eb; }
        
        .search-bar-top { width: 100%; position: relative; max-width: 400px; }
        .search-bar-top input { width: 100%; padding: 10px 10px 10px 40px; border-radius: 50px; border: 1px solid rgba(55,65,81,0.9); font-size: 0.95rem; outline: none; background:#020617; color:#e5e7eb; }
        .search-bar-top input::placeholder { color:#6b7280; }
        .search-icon { position: absolute; left: 15px; top: 50%; transform: translateY(-50%); color: #9ca3af; font-size: 1rem; }

        /* CAR GRID SYSTEM */
        .grid-container { display: grid; gap: 25px; transition: 0.3s; align-items: stretch; }
        /* "3" = three cards per row, "2" = two larger cards per row */
        .cols-3 { grid-template-columns: repeat(3, minmax(0, 1fr)); }
        .cols-2 { grid-template-columns: repeat(2, minmax(0, 1fr)); }

        /* CAR CARD - UNIFORM TILE STYLES */
        .car-card { 
            background: radial-gradient(circle at top left, #020617 0, #020617 50%, #020617 100%); 
            border-radius: var(--radius-lg); 
            overflow: hidden; 
            box-shadow: var(--card-shadow); 
            transition: 0.3s; 
            position: relative; 
            display: flex; 
            flex-direction: column; 
            border: 1px solid #eee; 
            height: 100%; /* Ensures all cards in a row match height */
        }
        .car-card:hover { transform: translateY(-5px); box-shadow: 0 15px 40px rgba(102, 0, 255, 0.1); border-color: #00CCFF; }
        
        /* IMAGE WRAPPER - FORCE ASPECT RATIO */
        .car-img-wrapper { 
            position: relative; 
            width: 100%; 
            aspect-ratio: 16/10; /* Fixed Aspect Ratio */
            background: radial-gradient(circle at top left, #020617 0, #020617 55%, #020617 100%); 
            overflow: hidden;
        }
        .car-img-wrapper img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; /* Crops image to fill container without stretching */
            object-position: center;
            transition: 0.5s;
        }
        .car-card:hover .car-img-wrapper img { transform: scale(1.05); }

        .badge-grade { position: absolute; top: 10px; right: 10px; background: rgba(0,0,0,0.7); color: white; padding: 3px 8px; border-radius: 4px; font-size: 0.75rem; font-weight: 600; backdrop-filter: blur(4px); z-index: 2; }
        .badge-status { position: absolute; top: 10px; left: 10px; padding: 3px 10px; border-radius: 999px; font-size: 0.72rem; font-weight: 600; color: #fff; z-index: 2; letter-spacing: 0.04em; text-transform: uppercase; box-shadow: 0 4px 10px rgba(0,0,0,0.18); }
        .badge-status.ready { background: linear-gradient(135deg, #16a34a, #22c55e); }
        .badge-status.transit { background: linear-gradient(135deg, #eab308, #f97316); }
        .badge-status.arrived { background: linear-gradient(135deg, #2563eb, #4f46e5); }
        .badge-status.auction { background: linear-gradient(135deg, #7c3aed, #06b6d4); }
        .badge-auction-date { position:absolute; top:10px; left:10px; padding:3px 10px; border-radius:999px; font-size:0.72rem; font-weight:600; color:#e5e7eb; z-index:2; letter-spacing:0.04em; text-transform:uppercase; box-shadow:0 4px 10px rgba(0,0,0,0.18); background:rgba(15,23,42,0.9); backdrop-filter:blur(6px); display:flex; align-items:center; gap:6px; cursor:help; }
        .badge-auction-date i { font-size:0.8rem; color:#38bdf8; }
        .badge-auction-date-tooltip { position:absolute; left:0; top:120%; background:#0b1020; color:#e5ecff; padding:8px 10px; border-radius:8px; font-size:0.7rem; width:230px; box-shadow:0 10px 25px rgba(15,23,42,0.65); opacity:0; transform:translateY(4px); pointer-events:none; transition:opacity 0.18s ease, transform 0.18s ease; z-index:10; border:1px solid rgba(148,163,184,0.5); }
        .badge-auction-date:hover .badge-auction-date-tooltip { opacity:1; transform:translateY(0); }
        @media (max-width: 900px) {
            .badge-auction-date-tooltip { left:auto; right:0; width:260px; }
        }
        
        .card-body { padding: 15px; flex: 1; display: flex; flex-direction: column; justify-content: space-between; }
        .card-title { font-size: 1.05rem; font-weight: 700; margin-bottom: 5px; color: #e5e7eb; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        .card-meta { display: flex; gap: 8px; font-size: 0.75rem; color: #9ca3af; margin-bottom: 6px; flex-wrap: wrap; }
        .card-meta span { display: flex; align-items: center; gap: 4px; background: rgba(15,23,42,0.85); padding: 3px 6px; border-radius: 4px; border:1px solid rgba(31,41,55,0.9); }
        .card-submeta { display:flex; justify-content: space-between; align-items:center; font-size:0.74rem; color:#9ca3af; margin-bottom:8px; }
        .card-submeta span { display:flex; align-items:center; gap:4px; }
        .auction-pill { display:inline-flex; align-items:center; gap:5px; padding:3px 8px; border-radius:999px; background:rgba(15,23,42,0.9); color:#e5e7eb; font-weight:600; font-size:0.7rem; cursor:default; position:relative; border:1px solid rgba(148,163,184,0.7); }
        .auction-pill i { font-size:0.75rem; }
        
        .price-tag { font-family: 'Jost', sans-serif; font-size: 1.2rem; font-weight: 700; color: #a855f7; display: block; margin-bottom: 12px; }
        .price-hidden { color: #e5e7eb; font-size: 1rem; }
        
        .card-actions { display: grid; grid-template-columns: 1fr 1fr; gap: 8px; margin-top: auto; }
        .btn-view, .btn-whatsapp { padding: 9px 10px; border-radius: 999px; font-size: 0.82rem; font-family: 'Jost', sans-serif; font-weight: 600; text-align: center; cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 5px; border: none; letter-spacing: 0.02em; transition: 0.25s ease; }
        .btn-view { background: rgba(15,23,42,0.85); color: #e5e7eb; border: 1px solid rgba(148,163,184,0.7); }
        .btn-view:hover { background: #111827; color: #fff; box-shadow: 0 6px 16px rgba(15,23,42,0.9); }
        .btn-whatsapp { background: #25D366; color: white; box-shadow: 0 4px 12px rgba(37,211,102,0.4); }
        .btn-whatsapp:hover { background: #1ebc57; box-shadow: 0 6px 18px rgba(37,211,102,0.5); transform: translateY(-1px); }
        .btn-bid { 
            background: radial-gradient(circle at top left, #0b1020 0, #020617 55%, #020617 100%);
            color:#e5e7eb; 
            border:1px solid rgba(148,163,184,0.8); 
            box-shadow:0 6px 18px rgba(15,23,42,0.85);
            font-size:0.84rem;
        }
        .btn-bid i { color:#38bdf8; }
        .btn-bid:hover { 
            background: radial-gradient(circle at top left, #020617 0, #020617 40%, #111827 100%);
            color:#f9fafb; 
            box-shadow:0 10px 26px rgba(15,23,42,0.95); 
            transform:translateY(-1px);
        }

        /* Bid modal */
        .bid-overlay { display:none; position:fixed; inset:0; background:rgba(15,23,42,0.85); z-index:1200; justify-content:center; align-items:center; padding:16px; }
        .bid-modal { background:#f9fafb; border-radius:18px; max-width:440px; width:100%; padding:20px 20px 18px; box-shadow:0 20px 45px rgba(15,23,42,0.55); position:relative; }
        .bid-close { position:absolute; top:10px; right:12px; width:30px; height:30px; border-radius:999px; border:none; background:#e5e7eb; color:#111827; display:flex; align-items:center; justify-content:center; cursor:pointer; }
        .bid-close:hover { background:#f97373; color:#fff; }
        .bid-title { font-family:'Jost',sans-serif; font-size:1.1rem; margin-bottom:6px; color:#111827; }
        .bid-subtitle { font-size:0.85rem; color:#4b5563; margin-bottom:12px; }
        .bid-row { display:flex; flex-direction:column; gap:6px; margin-bottom:12px; font-size:0.85rem; }
        .bid-row label { font-weight:600; color:#111827; font-size:0.8rem; }
        .bid-row input, .bid-row select, .bid-row textarea { padding:9px 10px; border-radius:9px; border:1px solid #d1d5db; font-size:0.85rem; outline:none; }
        .bid-row input:focus, .bid-row select:focus, .bid-row textarea:focus { border-color:#6366f1; box-shadow:0 0 0 1px rgba(129,140,248,0.6); }
        .bid-hint { font-size:0.75rem; color:#6b7280; }
        .bid-footer { display:flex; flex-direction:column; gap:8px; margin-top:6px; font-size:0.75rem; color:#6b7280; }
        .bid-actions { display:flex; flex-direction:column; gap:8px; margin-top:8px; }
        .btn-bid-confirm { background:#16a34a; color:#ecfdf5; border:none; padding:10px 14px; border-radius:999px; font-family:'Jost',sans-serif; font-size:0.9rem; font-weight:600; cursor:pointer; display:flex; align-items:center; justify-content:center; gap:6px; }
        .btn-bid-confirm:hover { background:#15803d; }
        .btn-bid-secondary { background:transparent; border:none; color:#4b5563; font-size:0.8rem; text-decoration:underline; cursor:pointer; align-self:center; }

        /* MODAL STYLES */
        .modal-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; padding: 14px; backdrop-filter: blur(5px); }
        .modal-content { background: white; width: 100%; max-width: 1000px; max-height: 92vh; border-radius: 20px; overflow: hidden; display: flex; position: relative; animation: slideUp 0.3s ease; }
        .modal-close { position: absolute; top: 15px; right: 20px; font-size: 1.5rem; color: #333; cursor: pointer; z-index: 10; background: rgba(255,255,255,0.8); width: 40px; height: 40px; border-radius: 50%; display: flex; align-items: center; justify-content: center; transition: 0.2s; }
        .modal-close:hover { background: #ff4d4d; color: white; }
        .modal-gallery { flex: 1.5; background: #000; position: relative; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        .modal-gallery img { width: 100%; height: 100%; object-fit: contain; }
        .carousel-btn { position: absolute; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); color: white; border: none; padding: 15px; cursor: pointer; font-size: 1.2rem; transition: 0.2s; }
        .carousel-btn:hover { background: rgba(255,255,255,0.4); }
        .prev-btn { left: 0; } .next-btn { right: 0; }
        
        /* --- FIXED: Modal Text Colors (Force Dark Text on Light BG) --- */
        .modal-details { flex: 1; padding: 26px 24px 28px; overflow-y: auto; background: white; color: #1f2937; /* Dark Grey */ }
        .modal-title { font-size: 1.8rem; margin-bottom: 6px; color: #111827 !important; /* Force Black Title */ }
        .modal-price-row { display: flex; align-items: center; gap: 10px; margin-bottom: 18px; flex-wrap: wrap; }
        .modal-price { font-size: 1.6rem; color: #6600FF; font-family: 'Jost'; font-weight: 700; display: block; }
        .modal-status-pill { font-size: 0.8rem; font-weight: 600; padding: 6px 12px; border-radius: 999px; text-transform: uppercase; letter-spacing: 0.06em; }
        .modal-status-ready { background: linear-gradient(135deg, #16a34a, #22c55e); color: #fff; }
        .modal-status-transit { background: linear-gradient(135deg, #eab308, #f97316); color: #fff; }
        .modal-status-arrived { background: linear-gradient(135deg, #2563eb, #4f46e5); color: #fff; }
        
        .spec-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 25px; }
        /* Darkened Spec Items for Visibility */
        .spec-item { background: #f3f4f6; border: 1px solid #e5e7eb; padding: 10px; border-radius: 8px; font-size: 0.9rem; }
        .spec-item strong { display: block; color: #6b7280; font-size: 0.75rem; margin-bottom: 3px; }
        .spec-item span { color: #111827; font-weight: 600; } /* Dark Black Value */

        /* FOOTER (SHARED WITH index.html) */
        footer { background: radial-gradient(circle at top left, #1b1433 0, #05040a 55%, #020308 100%); color: #b5bcd1; padding: 48px 0 26px; border-top: 1px solid rgba(255,255,255,0.05); margin-top: auto; }
        .footer-grid { display: grid; grid-template-columns: minmax(0, 2fr) repeat(3, minmax(0, 1.1fr)); gap: 32px; margin-bottom: 32px; align-items: flex-start; }
        .footer-col h3 { color: #f5f6ff; margin-bottom: 18px; font-size: 0.98rem; letter-spacing: 0.08em; text-transform: uppercase; opacity: 0.8; }
        .footer-tagline { margin-top: 8px; font-size: 0.92rem; color: #d0d4e4; }
        .footer-logo-text { font-family: 'Jost', sans-serif; font-size: 2.2rem; color: #ffffff; font-weight: 700; display: inline-flex; align-items: center; gap: 10px; letter-spacing: -0.5px; }
        .footer-logo-dot { width: 9px; height: 9px; border-radius: 999px; background: linear-gradient(135deg, #6600FF, #00CCFF); box-shadow: 0 0 14px rgba(102,0,255,0.8); }
        .footer-meta { margin-top: 16px; font-size: 0.86rem; color: #9aa2c0; }
        .footer-meta span { display: inline-flex; align-items: center; gap: 6px; margin-right: 16px; }
        .footer-meta i { font-size: 0.9rem; color: #7c8cff; }
        .footer-links ul { list-style: none; }
        .footer-links li { margin-bottom: 10px; }
        .footer-links a { font-size: 0.93rem; color: #c2c8dd; display: inline-flex; align-items: center; gap: 8px; padding: 4px 0; position: relative; overflow: hidden; }
        .footer-links a::before { content: ""; position: absolute; left: 0; bottom: 0; width: 0; height: 1px; background: linear-gradient(90deg, #6600FF, #00CCFF); transition: width 0.25s ease; }
        .footer-links a:hover { color: #ffffff; transform: translateX(2px); }
        .footer-links a:hover::before { width: 100%; }
        .footer-links i { width: 16px; text-align: center; color: #7c8cff; }
        .footer-pill { display: inline-flex; align-items: center; gap: 6px; padding: 4px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.08); font-size: 0.78rem; color: #9aa2c0; margin-bottom: 6px; }
        .footer-pill i { color: #7c8cff; font-size: 0.8rem; }
        .footer-bottom { display: flex; justify-content: space-between; align-items: center; gap: 16px; padding-top: 18px; border-top: 1px solid rgba(255,255,255,0.06); font-size: 0.82rem; color: #8d93aa; flex-wrap: wrap; }
        .footer-bottom-links { display: flex; gap: 16px; flex-wrap: wrap; }
        .footer-bottom a { color: #a4aac4; }
        .footer-bottom a:hover { color: #ffffff; }

        @media (max-width: 900px) {
            .footer-grid { grid-template-columns: repeat(2, minmax(0, 1fr)); row-gap: 28px; }
        }

        @media (max-width: 640px) {
            footer { padding: 40px 0 24px; }
            .footer-grid { grid-template-columns: minmax(0, 1fr); gap: 20px; }
            .footer-logo-text { font-size: 1.9rem; }
            .footer-bottom { flex-direction: column-reverse; align-items: flex-start; }
        }

        /* MOBILE RESPONSIVE */
        .mobile-filter-toggle { display: none; width: 100%; padding: 12px; background: white; border: 1px solid #ddd; border-radius: 8px; font-weight: 600; margin-bottom: 20px; text-align: center; cursor: pointer; }
        
        @keyframes slideUp { from { transform: translateY(50px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }

        @media (max-width: 900px) {
            .inventory-wrapper { display: block; padding-top: 20px; }
            .sidebar { display: none; margin-bottom: 20px; position: static; top: auto; box-shadow: 0 12px 30px rgba(0,0,0,0.12); }
            .sidebar.active { display: block; }
            .mobile-filter-toggle { display: block; }
            .view-toggles { display: none; } 
            .grid-container { grid-template-columns: repeat(auto-fill, minmax(100%, 1fr)) !important; }
            .list-controls { align-items: flex-start; gap: 12px; }
            .list-controls h2 { width: 100%; font-size: 1.25rem; }
            .modal-content { flex-direction: column; height: auto; max-height: 100vh; border-radius: 18px; }
            .modal-gallery { height: 38vh; flex: none; }
            .modal-details { flex: 1; padding: 20px 18px 22px; }
            .modal-title { font-size: 1.4rem; }
            .modal-price { font-size: 1.3rem; }
            .spec-grid { grid-template-columns: 1fr 1fr; gap: 10px; }
        }

        @media (max-width: 600px) {
            header { padding: 10px 0; }
            .nav-inner { gap: 8px; }
            .logo { font-size: 1.4rem; }
            .inventory-wrapper { padding: 20px 0 30px; }
            .sidebar { padding: 18px 16px; }
            .filter-group { margin-bottom: 14px; }
            .filter-group label { font-size: 0.85rem; }
            .filter-group select, .filter-group input { padding: 8px 9px; font-size: 0.85rem; }
            .filter-btn { padding: 10px; }
            .grid-container { gap: 18px; }
            .car-card { border-radius: 14px; }
            .card-body { padding: 12px 12px 14px; }
            .card-title { font-size: 0.98rem; }
            .card-meta { font-size: 0.7rem; }
            .price-tag { font-size: 1.05rem; }
            .card-actions { grid-template-columns: 1fr; }
            .btn-view, .btn-whatsapp, .btn-bid { font-size: 0.82rem; padding: 9px 10px; }
            .modal-overlay { padding: 10px; }
        }
    </style>
</head>
<body>

    <header>
        <div class="container nav-inner">
            <a href="index.html" class="logo"><img src="img/logo.svg" alt="Vinvel Motor Trading logo"></a>
            <div style="display:flex; align-items:center; gap:12px;">
                <a href="cars.html" style="font-size:0.86rem; font-weight:500; color:#e5e7eb; display:inline-flex; align-items:center; gap:6px; padding:6px 11px; border-radius:999px; border:1px solid rgba(148,163,184,0.65); background:rgba(15,23,42,0.85);">
                    <i class="fa-solid fa-car" style="color:#a5b4fc;"></i>
                    <span>Buy Now</span>
                </a>
                <a href="index.html" style="font-weight: 500; color: var(--text-dark); display: flex; align-items: center; gap: 8px;">
                    <i class="fa-solid fa-arrow-left"></i> <span style="font-size: 0.9rem;">Back to Home</span>
                </a>
            </div>
        </div>
    </header>

    <div class="container" style="padding: 24px 20px 8px; max-width: 1300px;">
        <div style="background: #0f172a; color: #e5ecff; border-radius: 18px; padding: 22px 22px 20px; display:flex; flex-wrap:wrap; align-items:flex-start; gap:16px; margin-bottom:22px; box-shadow:0 20px 45px rgba(15,23,42,0.85); border:1px solid rgba(148,163,184,0.75);">
            <div style="flex:1 1 260px;">
                <div style="font-size:0.8rem; letter-spacing:0.16em; text-transform:uppercase; opacity:0.7; margin-bottom:6px;">Vinvel Auction Picks</div>
                <h1 style="font-family:'Jost',sans-serif; font-size:1.6rem; margin-bottom:6px; color:#fff;">Hand-picked units not yet purchased</h1>
                <p style="font-size:0.9rem; opacity:0.9;">
                    These vehicles are shortlisted by the Vinvel team and still available at Japanese auctions. You can place a bid and our team will verify it, submit at auction, and then update the live highest bid on this page.
                </p>
            </div>
            <div style="flex:0 0 260px; font-size:0.85rem; background:rgba(15,23,42,0.9); border-radius:12px; padding:10px 12px; border:1px solid rgba(148,163,184,0.5); position:relative;">
                <div style="display:flex; align-items:center; gap:8px; margin-bottom:6px;">
                    <i class="fa-solid fa-circle-info" style="color:#38bdf8;"></i>
                    <strong>How auction bids work</strong>
                </div>
                <ul style="padding-left:18px; margin:0; display:flex; flex-direction:column; gap:2px;">
                    <li>Place your maximum bid in LKR or JPY.</li>
                    <li>Bid is sent to Vinvel via WhatsApp for verification.</li>
                    <li>After confirmation, we submit it at auction on your behalf.</li>
                </ul>
            </div>
        </div>
    </div>

    <div class="container inventory-wrapper">
        
        <button class="mobile-filter-toggle" onclick="toggleSidebar()">
            <i class="fa-solid fa-sliders"></i> Filters
        </button>

        <aside class="sidebar" id="filterSidebar">
            <div class="sidebar-header">
                <h3>Auction Filters</h3>
                <i class="fa-solid fa-xmark" style="cursor: pointer; display: none;" onclick="toggleSidebar()" id="closeFilters"></i>
            </div>
            
            <div class="filter-group">
                <label>Make</label>
                <select id="makeSelect" onchange="applyFilters()">
                    <option value="All">All Makes</option>
                    </select>
            </div>

            <div class="filter-group">
                <label>Model</label>
                <select id="modelSelect" onchange="applyFilters()">
                    <option value="All">All Models</option>
                </select>
            </div>

            <div class="filter-group">
                <label>Min Year</label>
                <input type="number" id="minYear" placeholder="e.g. 2015" onkeyup="applyFilters()">
            </div>

             <div class="filter-group">
                <label>Max Price (LKR)</label>
                <input type="number" id="maxPrice" placeholder="e.g. 10000000" onkeyup="applyFilters()">
            </div>

            <button class="filter-btn" onclick="applyFilters()">Apply Filters</button>
            <button class="reset-btn" onclick="resetFilters()">Reset All</button>
        </aside>

        <main class="car-list">
            
            <div class="list-controls">
                <h2 id="resultCount" style="font-size: 1.4rem;">Loading auction picks...</h2>
                
                <div style="display: flex; gap: 20px; align-items: center;">
                    <div class="search-bar-top">
                        <i class="fa-solid fa-magnifying-glass search-icon"></i>
                        <input type="text" id="searchInput" placeholder="Search inventory..." onkeyup="applyFilters()">
                    </div>

                    <div class="view-toggles">
                        <span style="font-size: 0.85rem; font-weight: 600;">View:</span>
                        <button class="view-btn active" onclick="setGrid(2, this)" title="2 per row">2</button>
                        <button class="view-btn" onclick="setGrid(3, this)" title="3 per row">3</button>
                    </div>
                </div>
            </div>

            <div class="grid-container cols-2" id="carsGrid">
                </div>
            <div class="pagination-bar" id="paginationBar" style="display:none;">
                <div id="paginationInfo">Showing 0 of 0 cars</div>
                <div style="display:flex; gap:16px; align-items:center; flex-wrap:wrap;">
                    <div>
                        <label for="pageSizeSelect" style="margin-right:6px;">Per page:</label>
                        <select id="pageSizeSelect" class="page-size-select" onchange="changePageSize()">
                            <option value="10" selected>10</option>
                            <option value="20">20</option>
                        </select>
                    </div>
                    <div class="page-controls" id="pageControls"></div>
                </div>
            </div>
        </main>
    </div>

    <div id="carModal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-close" onclick="closeModal()">&times;</div>
            <div class="modal-gallery">
                <button class="carousel-btn prev-btn" onclick="changeSlide(-1)">&#10094;</button>
                <img id="modalImage" src="" alt="Car Detail">
                <button class="carousel-btn next-btn" onclick="changeSlide(1)">&#10095;</button>
            </div>
            <div class="modal-details">
                <h2 class="modal-title" id="modalTitle">Car Title</h2>
                <div class="modal-price-row">
                    <span class="modal-price" id="modalPrice">Est. LKR 0</span>
                    <span id="modalStatus" class="modal-status-pill modal-status-ready">Auction Pick</span>
                </div>
                <p style="margin-bottom: 20px; color: #666; font-size: 0.95rem;">
                    Verified Auction Grade <span id="modalGrade" style="font-weight: 700; color: #333;">4.5</span>. 
                    This unit is <strong>not yet purchased</strong>. Vinvel submits your bid at the Japanese auction and coordinates shipping only if the car is won.
                </p>
                <div class="spec-grid">
                    <div class="spec-item"><strong>Year</strong> <span id="modalYear">2019</span></div>
                    <div class="spec-item"><strong>Mileage</strong> <span id="modalMileage">45k km</span></div>
                    <div class="spec-item"><strong>Engine</strong> <span id="modalEngine">1.5L</span></div>
                    <div class="spec-item"><strong>Fuel</strong> <span id="modalFuel">Petrol</span></div>
                    <div class="spec-item"><strong>Transmission</strong> <span id="modalTrans">Auto</span></div>
                    <div class="spec-item"><strong>Ref ID</strong> <span id="modalRef">001</span></div>
                </div>
                <a href="#" id="modalWhatsapp" class="btn-whatsapp" style="width: 100%; padding: 15px; font-size: 1rem; margin-bottom:8px;">
                    <i class="fa-brands fa-whatsapp"></i> Chat with Vinvel
                </a>
                <button type="button" class="btn-bid" style="width:100%; padding:12px 14px; font-size:0.95rem;" onclick="window.openBidModal()">
                    <i class="fa-solid fa-gavel"></i> Place Auction Bid
                </button>
            </div>
        </div>
    </div>

    <div id="bidOverlay" class="bid-overlay">
        <div class="bid-modal">
            <button class="bid-close" onclick="closeBidModal()">&times;</button>
            <h3 class="bid-title" id="bidCarTitle">Place a bid</h3>
            <p class="bid-subtitle">These cars are not purchased yet. Your bid will be sent to Vinvel on WhatsApp for review and then submitted at auction.</p>
            <div class="bid-row">
                <label for="bidAmount">Your maximum bid</label>
                <div style="display:flex; gap:8px;">
                    <select id="bidCurrency" style="max-width:90px;">
                        <option value="LKR">LKR</option>
                        <option value="JPY">JPY</option>
                    </select>
                    <input type="number" id="bidAmount" placeholder="e.g. 8,500,000" min="0">
                </div>
                <div class="bid-hint">We recommend entering the <strong>maximum</strong> you are comfortable paying landed in Sri Lanka.</div>
            </div>
            <div class="bid-row">
                <label for="bidName">Your name</label>
                <input type="text" id="bidName" placeholder="Full name">
            </div>
            <div class="bid-row">
                <label for="bidWhatsapp">WhatsApp number</label>
                <input type="tel" id="bidWhatsapp" placeholder="e.g. +94 71 487 8393">
            </div>
            <div class="bid-row">
                <label for="bidNotes">Notes (optional)</label>
                <textarea id="bidNotes" rows="2" placeholder="Any special requests, budget notes or timing?" style="resize:vertical;"></textarea>
            </div>
            <div class="bid-actions">
                <button class="btn-bid-confirm" onclick="window.submitBidViaWhatsApp()">
                    <i class="fa-brands fa-whatsapp"></i>
                    Send bid via WhatsApp
                </button>
                <button class="btn-bid-secondary" type="button" onclick="closeBidModal()">Cancel and go back</button>
            </div>
            <div class="bid-footer">
                <div><strong>Important:</strong> Your bid is <em>not</em> a final purchase. Vinvel will confirm availability, taxes and shipping before you commit.</div>
            </div>
        </div>
    </div>

    <script type="module">
        // Importing helpers from your updated client
        import { getAuctionPicks, urlFor, getCarImages } from './js/sanity-client.js';

        let allCars = [];
        let filteredCars = [];
        let currentPage = 1;
        let pageSize = 10;
        let currentCarImages = []; 
        let currentSlideIndex = 0;
        let currentCar = null; // for Bid functionality

        // --- INIT ---
        async function initAuction() {
            const grid = document.getElementById('carsGrid');
            const countLabel = document.getElementById('resultCount');
            
            try {
                // Fetch auction cars (sanity client already filters for 'stockType == auction')
                allCars = await getAuctionPicks();
                
                filteredCars = allCars;
                populateDropdowns(allCars);
                render();
            } catch (error) {
                console.error("Sanity Error:", error);
                grid.innerHTML = "<p>Sorry, we couldn't load the auction picks. Please try again later.</p>";
                countLabel.innerText = "Error Loading Data";
            }
        }

        // --- RENDER LOGIC ---
        function render() {
            const total = filteredCars.length;
            const totalPages = Math.max(1, Math.ceil(total / pageSize));
            if (currentPage > totalPages) currentPage = totalPages;
            
            const start = (currentPage - 1) * pageSize;
            const end = start + pageSize;
            const pageItems = filteredCars.slice(start, end);
            
            displayCars(pageItems, total);
            updatePagination(total, totalPages);
        }

        function displayCars(cars, totalCount) {
            const grid = document.getElementById('carsGrid');
            const countLabel = document.getElementById('resultCount');
            grid.innerHTML = "";
            
            if (cars.length === 0) {
                grid.innerHTML = "<div style='grid-column: 1/-1; text-align:center; padding: 40px;'><p>No auction picks found matching your criteria.</p></div>";
                countLabel.innerText = "0 Results";
                return;
            }

            countLabel.innerText = `Showing ${cars.length} of ${totalCount} Picks`;

            cars.forEach(car => {
                const priceDisplay = (!car.hidePrice && car.price > 0) 
                    ? `Est. LKR ${car.price.toLocaleString()}` 
                    : "Estimate on Request";
                
                const priceClass = car.hidePrice ? "price-tag price-hidden" : "price-tag";
                
                // Use first image as thumbnail
                const thumbUrl = car.images && car.images.length > 0 
                    ? urlFor(car.images[0]).width(800).height(500).url() 
                    : 'https://via.placeholder.com/800x500?text=No+Image';

                // Auction Date Format
                const auctionDateLabel = car.auctionDate 
                    ? new Date(car.auctionDate).toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' }) 
                    : null;

                const cardHTML = `
                    <div class="car-card">
                        <div class="car-img-wrapper">
                            ${auctionDateLabel ? `<span class="badge-auction-date"><i class="fa-solid fa-calendar-day"></i>${auctionDateLabel}<span class="badge-auction-date-tooltip">This is the scheduled Japanese auction date. Vinvel submits your bid to this auction.</span></span>` : ''}
                            <span class="badge-grade">Grade ${car.grade || '-'}</span>
                            <img src="${thumbUrl}" alt="${car.title}" onerror="this.src='https://via.placeholder.com/800x600?text=No+Image'">
                        </div>
                        <div class="card-body">
                            <div>
                                <h3 class="card-title" title="${car.title}">${car.title}</h3>
                                <div class="card-meta">
                                    <span>${car.year}</span>
                                    <span>${car.mileage}</span>
                                    <span>${car.engine}</span>
                                </div>
                                <div class="card-submeta">
                                    <span><i class="fa-solid fa-gavel"></i> Auction shortlisted</span>
                                    <span class="auction-pill" title="Vinvel-picked car that has not been purchased yet.">
                                        <i class="fa-solid fa-circle-question"></i> How this works
                                    </span>
                                </div>
                            </div>
                            <div>
                                <span class="${priceClass}">${priceDisplay}</span>
                                <div class="card-actions">
                                    <button class="btn-view" onclick="window.openModal('${car._id}')">View Details</button>
                                    <button class="btn-bid" onclick="window.openBidModalFromCard('${car._id}')">
                                        <i class="fa-solid fa-gavel"></i> Place Bid
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
                grid.innerHTML += cardHTML;
            });
        }

        // --- FILTERS ---
        window.applyFilters = () => {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const make = document.getElementById('makeSelect').value;
            const model = document.getElementById('modelSelect').value;
            const minYear = document.getElementById('minYear').value;
            const maxPrice = document.getElementById('maxPrice').value;

            filteredCars = allCars.filter(car => {
                const cTitle = (car.title || "").toLowerCase();
                const cMake = car.make || "";
                const cModel = car.model || "";
                const cYear = car.year || 0;
                const cPrice = car.price || 0;

                const matchesSearch = cTitle.includes(searchText) || (car._id && car._id.includes(searchText));
                const matchesMake = (make === "All") || (cMake === make);
                const matchesModel = (model === "All") || (cModel === model);
                const matchesYear = !minYear || (cYear >= parseInt(minYear));
                const matchesPrice = !maxPrice || (cPrice > 0 && cPrice <= parseInt(maxPrice));
                
                return matchesSearch && matchesMake && matchesModel && matchesYear && matchesPrice;
            });

            currentPage = 1;
            render();
        };

        function populateDropdowns(cars) {
            const makeSelect = document.getElementById('makeSelect');
            const modelSelect = document.getElementById('modelSelect');
            
            const makes = new Set();
            const models = new Set();
            
            cars.forEach(c => {
                if(c.make) makes.add(c.make);
                if(c.model) models.add(c.model);
            });

            makes.forEach(m => {
                const opt = document.createElement('option');
                opt.value = m;
                opt.innerText = m;
                makeSelect.appendChild(opt);
            });

            models.forEach(m => {
                const opt = document.createElement('option');
                opt.value = m;
                opt.innerText = m;
                modelSelect.appendChild(opt);
            });
        }

        window.resetFilters = () => {
            document.getElementById('searchInput').value = "";
            document.getElementById('makeSelect').value = "All";
            document.getElementById('modelSelect').value = "All";
            document.getElementById('minYear').value = "";
            document.getElementById('maxPrice').value = "";
            filteredCars = allCars;
            currentPage = 1;
            render();
        };

        // --- PAGINATION (Added Missing Function) ---
        function updatePagination(total, totalPages) {
            const bar = document.getElementById('paginationBar');
            const info = document.getElementById('paginationInfo');
            const controls = document.getElementById('pageControls');

            if (total <= pageSize) {
                bar.style.display = 'none';
                return;
            }

            bar.style.display = 'flex';
            const start = (currentPage - 1) * pageSize + 1;
            const end = Math.min(currentPage * pageSize, total);
            info.textContent = `Showing ${start}-${end} of ${total} picks`;

            controls.innerHTML = '';

            const prevBtn = document.createElement('button');
            prevBtn.textContent = '<';
            prevBtn.className = 'page-btn';
            prevBtn.disabled = currentPage === 1;
            prevBtn.onclick = () => { if (currentPage > 1) { currentPage--; render(); } };
            controls.appendChild(prevBtn);

            for (let i = 1; i <= totalPages; i++) {
                const btn = document.createElement('button');
                btn.textContent = i;
                btn.className = 'page-btn' + (i === currentPage ? ' active' : '');
                btn.onclick = () => { currentPage = i; render(); };
                controls.appendChild(btn);
            }

            const nextBtn = document.createElement('button');
            nextBtn.textContent = '>';
            nextBtn.className = 'page-btn';
            nextBtn.disabled = currentPage === totalPages;
            nextBtn.onclick = () => { if (currentPage < totalPages) { currentPage++; render(); } };
            controls.appendChild(nextBtn);
        }

        // --- MODAL & GALLERY ---
        window.openModal = (carId) => {
            const car = allCars.find(c => c._id === carId);
            if (!car) return;
            currentCar = car; // for Bid modal reference

            document.getElementById('modalTitle').innerText = car.title;
            document.getElementById('modalPrice').innerText = (!car.hidePrice && car.price > 0) 
                ? `Est. LKR ${car.price.toLocaleString()}` 
                : "Estimate on Request";

            // Status Badge
            const statusLabel = car.auctionDate 
                ? `Auction: ${new Date(car.auctionDate).toLocaleDateString('en-GB', { day: '2-digit', month: 'short', year: 'numeric' })}` 
                : "Auction Pick";
            document.getElementById('modalStatus').innerText = statusLabel;

            // Specs
            document.getElementById('modalGrade').innerText = car.grade || '-';
            document.getElementById('modalYear').innerText = car.year || '-';
            document.getElementById('modalMileage').innerText = car.mileage || '-';
            document.getElementById('modalEngine').innerText = car.engine || '-';
            document.getElementById('modalFuel').innerText = car.fuel || '-';
            document.getElementById('modalTrans').innerText = car.transmission || '-';
            document.getElementById('modalRef').innerText = car._id.slice(-6).toUpperCase();
            
            // Images
            currentCarImages = getCarImages(car.images);
            currentSlideIndex = 0;
            updateSlide();

            // WhatsApp
            const phone = "94714878393";
            const text = `Hi Vinvel, I'm interested in the auction pick ${car.title} (Ref: ${car._id.slice(-6)}). Can you share the sheet?`;
            document.getElementById('modalWhatsapp').href = `https://wa.me/${phone}?text=${encodeURIComponent(text)}`;
            
            document.getElementById('carModal').style.display = 'flex';
        };

        window.closeModal = () => {
            document.getElementById('carModal').style.display = 'none';
        };

        window.changeSlide = (direction) => {
            currentSlideIndex += direction;
            if (currentSlideIndex >= currentCarImages.length) currentSlideIndex = 0;
            if (currentSlideIndex < 0) currentSlideIndex = currentCarImages.length - 1;
            updateSlide();
        };

        function updateSlide() {
            const imgElement = document.getElementById('modalImage');
            if(currentCarImages.length > 0) {
                imgElement.src = currentCarImages[currentSlideIndex];
            } else {
                imgElement.src = "https://via.placeholder.com/800x600?text=No+Image";
            }
        }

        // --- BID MODAL ---
        window.openBidModalFromCard = (carId) => {
            const car = allCars.find(c => c._id === carId);
            if (!car) return;
            currentCar = car;
            window.openBidModal();
        };

        window.openBidModal = () => {
            if (!currentCar) return;
            document.getElementById('bidCarTitle').innerText = `Bid for ${currentCar.title} (Ref: ${currentCar._id.slice(-6).toUpperCase()})`;
            document.getElementById('bidOverlay').style.display = 'flex';
        };

        window.closeBidModal = () => {
            document.getElementById('bidOverlay').style.display = 'none';
        };

        window.submitBidViaWhatsApp = () => {
            if (!currentCar) return;
            const amount = document.getElementById('bidAmount').value.trim();
            const currency = document.getElementById('bidCurrency').value;
            const name = document.getElementById('bidName').value.trim();
            const whatsapp = document.getElementById('bidWhatsapp').value.trim();
            const notes = document.getElementById('bidNotes').value.trim();

            const phone = "94714878393";
            let message = `Auction bid from vinvel.lk\n\n`;
            message += `Car: ${currentCar.title} (Ref: ${currentCar._id.slice(-6)})\n`;
            if (amount) message += `Bid: ${amount} ${currency}\n`;
            if (name) message += `Name: ${name}\n`;
            if (whatsapp) message += `Buyer WhatsApp: ${whatsapp}\n`;
            if (notes) message += `Notes: ${notes}\n`;
            message += `\nPlease verify this bid, confirm fees/taxes, and submit at auction if acceptable.`;

            const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        };

        // --- UI UTILS ---
        window.toggleSidebar = () => {
            const sidebar = document.getElementById('filterSidebar');
            if (sidebar.style.display === 'block') {
                sidebar.style.display = 'none';
            } else {
                sidebar.style.display = 'block';
            }
        };

        window.setGrid = (cols, btn) => {
            const grid = document.getElementById('carsGrid');
            const buttons = document.querySelectorAll('.view-btn');
            buttons.forEach(b => b.classList.remove('active'));
            if (btn) btn.classList.add('active');
            grid.classList.remove('cols-2', 'cols-3');
            if (cols === 3) {
                grid.classList.add('cols-3');
                document.querySelector('.container').style.maxWidth = "1400px";
            } else {
                grid.classList.add('cols-2');
                document.querySelector('.container').style.maxWidth = "1200px";
            }
        };

        window.changePageSize = () => {
            const select = document.getElementById('pageSizeSelect');
            pageSize = parseInt(select.value, 10) || 10;
            currentPage = 1;
            render();
        };

        // Start
        initAuction();
    </script>
</body>
</html>